<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1"><link href=../../css/fonts.css rel=stylesheet type=text/css><title>Benchmarking Your Puppet Code</title><link rel=stylesheet href=../../css/hugo-octopress.css><link rel=stylesheet href=../../css/fork-awesome.min.css><link href=../../favicon.png rel=icon><meta name=description content><meta name=keywords content><meta name=author content="Corey Osman"><meta name=generator content="Hugo 0.82.0"></head><body><header role=banner><hgroup><h1><a href=../../>Logical thoughts exposed</a></h1><h2>A journey through my life as a infrastructure developer</h2></hgroup></header><nav role=navigation><fieldset class=mobile-nav><select onchange="location=this.value"><option value>Navigateâ€¦</option></select></fieldset><ul class=main-navigation></ul><ul class=subscription><a href=../../index.xml target=_blank type=application/rss+xml title=RSS rel="noopener noreferrer"><i class="fa fa-rss-square fa-lg"></i></a></ul><form action=https://www.google.com/search method=get target=_blank rel="noopener noreferrer"><fieldset role=search><input class=search type=text name=q results=0 placeholder=Search>
<input type=hidden name=q value=site:/></fieldset></form></nav><div id=main><div id=content><div><article class=hentry role=article><header><p class=meta>Apr 24, 2017
- 2 minute read
- <a href=../../blog/2017-04-24-benchmarking-your-puppet-code/#disqus_thread>Comments</a>
- <a class=label href=../../categories/devops/>devops </a><a class=label href=../../categories/puppet/>puppet </a><a class=label href=../../categories/testing/>testing </a><a class=label href=../../categories/debugger/>debugger </a><a class=label href=../../categories/benchmark/>benchmark</a></p><h1 class=entry-title>Benchmarking Your Puppet Code</h1></header><div class=entry-content><p>Did you know the puppet debugger can measure how fast your puppet code runs? Starting with release 0.6.1 of the
<a href=https://github.com/nwops/puppet-debugger target=_blank rel=noopener>puppet-debugger</a>
you can now perform simple benchmarks against your puppet code.
So if you ever wondered how fast your puppet code is or that custom puppet function you wrote now there is a way to benchmark those things.</p><p>All you need to do is enable benchmark mode, and then use the debugger as you normally do. Every time puppet evaluates your input
a benchmark will be returned with your result of running the puppet code. This can be helpful when trying to determine
which code might take a long time to evaluate. A simple use case is measuring your puppet functions.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#2aa198>1</span><span style=color:#2aa198>:&gt;&gt;</span> benchmark
<span style=color:#cb4b16>Benchmark</span> <span style=color:#cb4b16>Mode</span> <span style=color:#cb4b16>On</span>
<span style=color:#2aa198>2</span><span style=color:#2aa198>:BM</span><span style=color:#719e07>&gt;&gt;</span> md5(<span style=color:#2aa198>&#39;dsfasda&#39;</span>)
 <span style=color:#719e07>=&gt;</span> <span style=color:#719e07>[</span>
  <span style=color:#719e07>[</span><span style=color:#2aa198>0</span><span style=color:#719e07>]</span> <span style=color:#2aa198>&#34;1b0590733e5d6ad1f122d95c47558564&#34;</span>,
  <span style=color:#719e07>[</span><span style=color:#2aa198>1</span><span style=color:#719e07>]</span> <span style=color:#2aa198>&#34;Time elapsed 50.57 ms&#34;</span>
<span style=color:#719e07>]</span>
<span style=color:#2aa198>3</span><span style=color:#2aa198>:BM</span><span style=color:#719e07>&gt;&gt;</span> md5(<span style=color:#2aa198>&#39;dsfasda&#39;</span>)
 <span style=color:#719e07>=&gt;</span> <span style=color:#719e07>[</span>
  <span style=color:#719e07>[</span><span style=color:#2aa198>0</span><span style=color:#719e07>]</span> <span style=color:#2aa198>&#34;1b0590733e5d6ad1f122d95c47558564&#34;</span>,
  <span style=color:#719e07>[</span><span style=color:#2aa198>1</span><span style=color:#719e07>]</span> <span style=color:#2aa198>&#34;Time elapsed 0.64 ms&#34;</span>
<span style=color:#719e07>]</span>
<span style=color:#2aa198>4</span><span style=color:#2aa198>:BM</span><span style=color:#719e07>&gt;&gt;</span>
</code></pre></div><p>As an example, running these functions back to back shows how the puppet application lazy loads puppet functions.
The first run took 50 ms which included loading the function, while the second only half a millisecond since the puppet function
was already loaded.</p><p>The benchmark feature is now available with
<a href=https://github.com/nwops/puppet-debugger target=_blank rel=noopener>puppet-debugger</a> release 0.6.1.</p><p><code>gem install puppet-debugger</code> or on the web at <a href=https://www.puppet-debugger.com>https://www.puppet-debugger.com</a></p><p>If you have a unique use case I would love to hear about it.</p><p><img src=../../images/benchmark.gif alt="Benchmark demo"></p></div><footer><p class=meta><span class="byline author vcard">Posted by <span class=fn>Corey Osman</span></span>
<time>Apr 24, 2017</time></span></p><p class=meta><a class="basic-alignment left" href=../../blog/2017-03-25-testing-datatypes-with-the-puppet-debugger/ title="Testing DataTypes with the Puppet Debugger">Testing DataTypes with the Puppet Debugger</a>
<a class="basic-alignment right" href=../../blog/2017-04-25-break-into-your-puppet-code/ title="Break into your puppet code">Break into your puppet code</a></p><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//logicalthoughtsexposed.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article></div><aside class="sidebar thirds"><section class="first odd"><p></p></section><ul class=sidebar-nav><li class=sidebar-nav-item><a target=_blank rel="noopener noreferrer" href=https://github.com/nwops/ title=https://github.com/nwops/><i class="fa fa-github fa-3x"></i></a>
<a target=_blank rel="noopener noreferrer" href=https://twitter.com/cosman2001 title=https://twitter.com/cosman2001><i class="fa fa-twitter fa-3x"></i></a>
<a target=_blank rel="noopener noreferrer" href=https://www.linkedin.com/in/logicmindscorp/ title=https://www.linkedin.com/in/logicmindscorp/><i class="fa fa-linkedin fa-3x"></i></a></li></ul><section class=odd><li><a href=../../categories/ title=Categories>Categories</a></li><li><a href=../../tags/ title=Tags>Tags</a></li></section><section class=even><h1>Recent Posts</h1><ul id=recent_posts><li class=post><a href=../../blog/2021-03-13-decouple-your-control-repo-branches/>Decouple Your Control Repo Branches</a></li><li class=post><a href=../../blog/2021-02-15-no-code-is-the-best-code/>No Code Is the Best Code</a></li><li class=post><a href=../../blog/2021-02-14-getting-real-with-the-ral/>Getting real with the RAL</a></li><li class=post><a href=../../blog/2019-04-02-adding-puppet-debugger-and-other-gems-when-using-pdk/>Adding Puppet Debugger and other gems when using PDK</a></li><li class=post><a href=../../blog/2018-09-25-alternative-facts/>Alternative Facts</a></li><li class=post><a href=../../blog/2018-09-25-debugging-and-inspecting-hiera-lookups/>Debugging and Inspecting hiera lookups</a></li><li class=post><a href=../../blog/2017-10-12-retrospec-the-task-generator/>Retrospec - the task generator</a></li><li class=post><a href=../../blog/2017-06-01-put-some-data-in-your-module/>Put some data in your module</a></li><li class=post><a href=../../blog/2017-04-25-break-into-your-puppet-code/>Break into your puppet code</a></li></ul></section></aside></div></div><footer role=contentinfo><p>Copyright &copy; 2021 Corey Osman - <a href=../../license/>License</a> -
<span class=credit>Powered by <a target=_blank href=https://gohugo.io rel="noopener noreferrer">Hugo</a> and <a target=_blank href=https://github.com/parsiya/hugo-octopress/ rel="noopener noreferrer">Hugo-Octopress</a> theme.</p></footer></body></html>